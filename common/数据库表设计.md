# 数据库表设计

我们在设计数据库的时候，通常不同的开发人员有不同的习惯。不同的习惯增加了开发人员之间的沟通成本，所以数据库表设计就是形成一个约定，减少开发人员的理解成本。

## 表设计

- 表名设计遵从：`${业务名}_实体名`
如`SYS_USER`，其中`SYS`是指`system`业务名称（可使用简写），`USER`是用户数据实体
- 实体名使用全英文，多个单词之间使用下划线隔开
- 两个表多对多关联关系中间表，没有额外的业务属性，使用`${表1实体名}_${表2实体名}_mappings`，如`user_role_mappings`
- 两个表多对多关联关系中间表，有额外的业务属性，使用`${表1实体名}_${表2实体名}`

## 字段设计

- 字段名应使用易于理解的英文单词或缩写，多个单词间用下划线分隔。不使用数据库保留关键字和拼音
- 布尔类型使用`is_`开头，如`is_active`表示是否已激活
- 时间类型使用`_at`结尾，如`created_at`表示创建时间
- 外键字段使用`_id`结尾，如`user_id`表示`user`表的主键ID，不使用外键约束

### 推荐最佳实践

- 逻辑删除而非物理删除，逻辑删除推荐用 `deleted_at` 做逻辑删除字段，能看出来删除的具体时间，比用 `is_deleted` 这种布尔字段更灵活
- 枚举字段优先使用数字，如果枚举类型较少、业务经常变动且频繁手动查询的可用英文
- 敏感字段需要加密，字段名前面加 `encrypted_` ，如密码为 `encrypted_password`
- 金额字段用 `decimal`，避免浮点数精度问题
